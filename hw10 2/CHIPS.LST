8086/87/88/186 MACRO ASSEMBLER    CHIPS                                                    20:25:05  01/07/;6  PAGE    1


DOS 5.0 (038-N) 8086/87/88/186 MACRO ASSEMBLER V3.1 ASSEMBLY OF MODULE CHIPS
OBJECT MODULE PLACED IN CHIPS.OBJ
ASSEMBLER INVOKED BY:  C:\UTIL\ASM86.EXE CHIPS.ASM M1 EP DB


LOC  OBJ                  LINE     SOURCE

                             1     NAME    CHIPS
                             2     
                             3     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                             4     ;                                                                            ;
                             5     ;                                     Chips                                  ;
                             6     ;                        RoboTrike Chip Select Functions                     ;
                             7     ;                                   EE/CS 51                                 ;
                             8     ;                                                                            ;
                             9     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                            10     
                            11     ; Description:       This program includes the routines for the RoboTrike
                            12     ;                    chip select. The public functions included are:
                            13     ;                        InitCS            - initializes the chip select
                            14     ;
                            15     ; Revision History:
                            16     ;     11/01/15  Nancy Cao         initial revision
                            17     ;     11/05/15  Nancy Cao         updated comments
                            18     
                            19     ; local include files
                            20 +1  $INCLUDE(CHIPS.INC)        ; display constants for timers
                      =1    21     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                      =1    22     ;                                                                            ;
                      =1    23     ;                                  CHIPS.INC                                 ;
                      =1    24     ;                          Chips Select Definitions                          ;
                      =1    25     ;                                 Include File                               ;
                      =1    26     ;                                                                            ;
                      =1    27     ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
                      =1    28     
                      =1    29     ; This file contains the definitions for the chip select functions.
                      =1    30     ;
                      =1    31     ; Revision History:
                      =1    32     ;     11/1/15   Nancy Cao      initial revisions and comments
                      =1    33     
                      =1    34     ; Addresses
  FFA4                =1    35     PACSreg         EQU     0FFA4H          ;address of PACS register
  FFA8                =1    36     MPCSreg         EQU     0FFA8H          ;address of MPCS register
                      =1    37     
                      =1    38     ; Control Register Values
  0003                =1    39     PACSval         EQU     00003H          ;PCS base at 0, 3 wait states
                      =1    40                                             ;0000000000------  starts at address 0
                      =1    41                                             ;----------000---  reserved
                      =1    42                                             ;-------------0--  wait for RDY inputs
                      =1    43                                             ;--------------11  3 wait states
  0183                =1    44     MPCSval         EQU     00183H          ;PCS in I/O space, use PCS5/6, 3 wait states
                      =1    45                                             ;0---------000---  reserved
                      =1    46                                             ;-0000001--------  MCS is 8KB
                      =1    47                                             ;--------1-------  output PCS5/PCS6
                      =1    48                                             ;---------0------  PCS in I/O space
                      =1    49                                             ;-------------0--  wait for RDY inputs
                      =1    50                                             ;--------------11  3 wait states
8086/87/88/186 MACRO ASSEMBLER    CHIPS                                                    20:25:05  01/07/;6  PAGE    2


LOC  OBJ                  LINE     SOURCE

                            51     
                            52     
                            53     CGROUP  GROUP   CODE
                            54     
                            55     
----                        56     CODE    SEGMENT PUBLIC 'CODE'
                            57     
                            58     
                            59             ASSUME  CS:CGROUP
                            60     
                            61     ; InitCS
                            62     ;
                            63     ; Description:       Initialize the Peripheral Chip Selects on the 80188.
                            64     ;
                            65     ; Operation:         Write the initial values to the PACS and MPCS registers.
                            66     ;
                            67     ; Arguments:         None.
                            68     ; Return Value:      None.
                            69     ;
                            70     ; Local Variables:   None.
                            71     ; Shared Variables:  None.
                            72     ; Global Variables:  None.
                            73     ;
                            74     ; Input:             None.
                            75     ; Output:            None.
                            76     ;
                            77     ; Error Handling:    None.
                            78     ;
                            79     ; Algorithms:        None.
                            80     ; Data Structures:   None.
                            81     ;
                            82     ; Registers Changed: AX, DX
                            83     ;
                            84     ; Author:            Nancy Cao
                            85     ; Revision History:
                            86     ;     11/01/2015     Nancy Cao        initial revision
                            87     ;     11/05/2015     Nancy Cao        updated comments
                            88     
0000                        89     InitCS  PROC    NEAR
                            90             PUBLIC  InitCS
                            91     
0000 BAA4FF                 92             MOV     DX, PACSreg    ;setup to write to PACS register
0003 B80300                 93             MOV     AX, PACSval
0006 EE                     94             OUT     DX, AL         ;write PACSval to PACS (base at 0, 3 wait states)
                            95     
0007 BAA8FF                 96             MOV     DX, MPCSreg    ;setup to write to MPCS register
000A B88301                 97             MOV     AX, MPCSval
000D EE                     98             OUT     DX, AL         ;write MPCSval to MPCS (I/O space, 3 wait states)
                            99     
                           100     
000E C3                    101             RET                    ;done so return
                           102     
                           103     
                           104     InitCS  ENDP
                           105     
8086/87/88/186 MACRO ASSEMBLER    CHIPS                                                    20:25:05  01/07/;6  PAGE    3


LOC  OBJ                  LINE     SOURCE

                           106     
----                       107     CODE ENDS
                           108     
                           109     END

ASSEMBLY COMPLETE, NO ERRORS FOUND
